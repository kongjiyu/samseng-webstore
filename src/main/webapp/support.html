<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <!-- <meta name="viewport" content="width=device-width, initial-scale=1.0"> -->
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: Arial, sans-serif;
    }

    #startChat {
      position: fixed;
      bottom: 20px;
      right: 20px;
      width: 60px;
      height: 60px;
      background-color: #0084ff;
      border-radius: 50%;
      display: flex;
      justify-content: center;
      align-items: center;
      box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.2);
      cursor: pointer;
    }

    #startChat img {
      width: 10px;
      height: 10px;
    }

    body {
      background: #f3f3f3;
    }

    /* Full-screen chat container */
    .chat-container {
      width: 100vw;
      height: 100vh;
      display: none;
      flex-direction: column;
      background: #e5ddd5;
    }

    /* Chat header */
    .chat-header {
      background:#075E54;
      color: white;
      padding: 15px;
      font-size: 18px;
      text-align: center;
    }

    /* Chat messages */
    .chat-box {
      flex: 1;
      overflow-y: auto;
      padding: 15px;
      display: flex;
      flex-direction: column;
    }

    .chat-bubble {
      max-width: 80%;
      padding: 12px;
      border-radius: 10px;
      margin: 8px;
      font-size: 16px;
    }

    .computer {
      background: #ece5dd;
      align-self: flex-start;
    }

    .user {
      background: #25D366;
      color: white;
      align-self: flex-end;
    }

    /* Question buttons */
    .question {
      background: white;
      padding: 12px;
      border-radius: 5px;
      margin: 5px 0;
      cursor: pointer;
      caret-color:aquamarine;
      font-size: 16px;
      text-align: left;
      border: 1px solid #ccc;
      box-shadow: 1px 1px 5px rgba(0, 0, 0, 0.1);
    }

    .question:hover {
      background-color:aquamarine;
    }

    /* Chat footer */
    .chat-footer {
      background: #f1f1f1;
      padding: 10px;
      display: flex;
      justify-content: space-between;
    }

    /* Home Page */
    .container {
      width: 100vw;
      height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      background: white;
    }

    button {
      background: #128C7E;
      color: white;
      padding: 15px 25px;
      border: none;
      border-radius: 5px;
      font-size: 18px;
      cursor: pointer;
    }

    button:hover {
      background: #075E54;
    }

    .exit-button {
      position: absolute;
      top: 10px;
      right: 10px;
      padding: 8px 15px;
      background-color: red;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-size: 14px;
    }

    .exit-button:hover {
      background-color: darkred;
    }

    /* Feedback popup */
    .feedback-popup {
      display: none;
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: white;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
      width: 300px;
      text-align: center;
    }

    .feedback-popup textarea {
      width: 100%;
      height: 100px;
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 5px;
      resize: none;
      margin-top: 10px;
    }

    .feedback-popup button {
      background: #128C7E;
      color: white;
      padding: 10px;
      border: none;
      border-radius: 5px;
      margin-top: 10px;
      cursor: pointer;
    }

    .feedback-popup button:hover {
      background: #075E54;
    }

  </style>
</head>
<body>

<!-- Home Page -->
<div id="mainPage" onclick="startChat()">
  <img src="https://cdn-icons-png.flaticon.com/512/724/724664.png" alt="Phone Icon">
</div>

<!-- Full-Screen Chat -->
<div class="chat-container" id="chatPage">
  <div class="chat-header">Support Bot</div>
  <div class="chat-box" id="chatBox">
    <div class="chat-bubble computer">Hello! How can I help you?</div>
    <div class="question" onclick="sendMessage(' How to make a payment?', 'You can pay using credit card, PayPal, or bank transfer.')"> How to make a payment?</div>
    <div class="question" onclick="sendMessage(' How do I reset my password?', 'Go to login page, click Forgot Password, and follow the steps.')"> How do I reset my password?</div>
    <div class="question" onclick="sendMessage(' How can I track my order?', 'Go to My Orders and click the tracking number.')"> How can I track my order?</div>
    <div class="question" onclick="openFeedbackPopup()"> Send Feedback</div>
    <div class="chat-footer">
      <button class="exit-button" onclick="backToHome()">Exit</button>
    </div>
  </div>

  <div id="feedbackPopup" class="feedback-popup">
    <h3>Send Feedback</h3>
    <textarea id="feedbackText" placeholder="Type your feedback here..."></textarea>
    <button onclick="sendFeedback()">Submit</button>
    <button onclick="closeFeedbackPopup()">Cancel</button>
  </div>

  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>

  <script>
    function startChat() {
      document.getElementById("mainPage").style.display = "none";
      document.getElementById("chatPage").style.display = "flex";
    }

    function backToHome() {
      document.getElementById("chatPage").style.display = "none";
      document.getElementById("mainPage").style.display = "flex";
    }

    function sendMessage(question, answer) {
      let chatBox = document.getElementById("chatBox");

      // User's message
      let userMsg = document.createElement("div");
      userMsg.classList.add("chat-bubble", "user");
      userMsg.innerText = question;
      chatBox.appendChild(userMsg);

      // Computer's response
      setTimeout(() => {
        let botMsg = document.createElement("div");
        botMsg.classList.add("chat-bubble", "computer");
        botMsg.innerText = answer;
        chatBox.appendChild(botMsg);

        // Ask again
        setTimeout(() => {
          let botAsk = document.createElement("div");
          botAsk.classList.add("chat-bubble", "computer");
          botAsk.innerText = "Do you need more help?";
          chatBox.appendChild(botAsk);

          // Repeat Questions
          addQuestions(chatBox);
        }, 1000);

      }, 1000);

      catBox.scrollTop = hchatBox.scrollHeight; // Auto-scroll
    }

    //question list
    function addQuestions(chatBox) {
      let questions = [
        { text: " How to make a payment?", answer: "You can pay using credit card, PayPal, or bank transfer." },
        { text: " How do I reset my password?", answer: "Go to login page, click 'Forgot Password', and follow the steps." },
        { text: " How can I track my order?", answer: "Go to 'My Orders' and click the tracking number." },
      ];

      questions.forEach(q => {
        let questionBtn = document.createElement("div");
        questionBtn.classList.add("question");
        questionBtn.innerText = q.text;
        questionBtn.onclick = () => sendMessage(q.text, q.answer);
        chatBox.appendChild(questionBtn);
      });

      chatBox.scrollTop = chatBox.scrollHeight;
    }

    // send email
    function openFeedbackPopup() {
      document.getElementById("feedbackPopup").style.display = "block";
    }

    function closeFeedbackPopup() {
      document.getElementById("feedbackPopup").style.display = "none";
    }

    emailjs.init("Sxhf21KtjqjoXYiXV");

    function sendFeedback() {
      let feedback = document.getElementById("feedbackText").value;

      if (feedback.trim() === "") {
        alert("Please enter your feedback before sending.");
        return;
      }

      emailjs.send("service_pxv96zu", "template_86y50s4", {
        message: feedback,
      }, "Sxhf21KtjqjoXYiXV")
              .then(function(response) {
                alert("Feedback sent successfully!");
              }, function(error) {
                alert("Failed to send feedback. Please try again.");
              });

      document.getElementById("feedbackPopup").style.display = "none";
    }

    function sendMessage(question, answer) {
      let chatBox = document.getElementById("chatBox");

      let userMsg = document.createElement("div");
      userMsg.classList.add("chat-bubble", "user");
      userMsg.innerText = question;
      chatBox.appendChild(userMsg);

      setTimeout(() => {
        let botMsg = document.createElement("div");
        botMsg.classList.add("chat-bubble", "computer");
        botMsg.innerText = answer;
        chatBox.appendChild(botMsg);

        setTimeout(() => {
          let botAsk = document.createElement("div");
          botAsk.classList.add("chat-bubble", "computer");
          botAsk.innerText = "Do you need more help?";
          chatBox.appendChild(botAsk);

          addQuestions(chatBox);
        }, 1000);

      }, 1000);

      chatBox.scrollTop = chatBox.scrollHeight;
    }
  </script>
</body>
</html>
